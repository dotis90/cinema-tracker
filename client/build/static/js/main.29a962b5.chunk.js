(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(26),c=a.n(l),o=a(6),i=a(8),m=a(15),s=a(27),u=a(66),d=a(67),p=a(41),E=[],v=a(16),f={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},h=Object(s.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=(t.type,t.payload);switch(t.type){case"SET_ALERT":return[].concat(Object(p.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==a}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(v.a)(Object(v.a)({},e),{},{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(v.a)(Object(v.a)(Object(v.a)({},e),n),{},{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(v.a)(Object(v.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}}}),b=[d.a],g=Object(s.createStore)(h,{},Object(u.composeWithDevTools)(s.applyMiddleware.apply(void 0,b))),y=a(36),w=a(11),O=a.n(w),j=a(18),k=a.n(j),S=a(29),I=a(13),T=a.n(I),x=a(114),C=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(x.a)();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},R=function(e){e?T.a.defaults.headers.common["x-auth-token"]=e:delete T.a.defaults.headers.common["x-auth-token"]},A=function(){return function(){var e=Object(S.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&R(localStorage.token),e.prev=1,e.next=4,T.a.get("/api/auth");case 4:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},_=a(0),N=a(46);y.a.propTypes={logout:O.a.func.isRequired,auth:O.a.object.isRequired};var L=Object(m.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})((function(e){var t=e.auth,a=t.isAuthenticated,l=t.loading,c=e.logout,i=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/login",className:"nav-link display-link"},"Login"),"",r.a.createElement(o.b,{to:"/register",className:"nav-link display-link"},"Sign Up")),m=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/favorites",className:"nav-link display-link"},"Favorites"),r.a.createElement(o.b,{to:"/main",className:"nav-link display-link"},"Movies"),r.a.createElement(o.b,{onClick:c,to:"/",className:"nav-link display-link"},"Logout"));return r.a.createElement(y.a,{className:"color-nav",expand:"lg",sticky:"top",variant:"dark"},r.a.createElement(y.a.Brand,null,r.a.createElement(o.b,{className:"display-link",to:"/"},r.a.createElement(_.b.Provider,{value:{size:"2rem"}},r.a.createElement(N.a,null),"  ","Cinema Tracker"))),r.a.createElement(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(y.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end"},!l&&r.a.createElement(n.Fragment,null,a?m:i)))})),F=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("h2",null,"Made by ",r.a.createElement("a",{className:"footerLink",href:"https://github.com/dotis90"},"Daniel Otis")))},G=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){return e.isAuthenticated?r.a.createElement(i.a,{to:"/main"}):r.a.createElement("section",{class:"landing"},r.a.createElement("div",{class:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,"Cinema Tracker"),r.a.createElement("p",null,"Browse today's most popular movies and save them to your Favorites list."),r.a.createElement(o.b,{class:"button",to:"/Register"},"Sign up")),r.a.createElement(_.b.Provider,{value:{size:"32rem"}},r.a.createElement(N.a,null))))})),B=a(33),P=a(12),U=a(7),D=a(20),M=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:C,register:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(S.a)(k.a.mark((function e(r){var l,c,o,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,T.a.post("/api/users",c,l);case 5:o=e.sent,r({type:"REGISTER_SUCCESS",payload:o.data}),r(A),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(i=e.t0.response.data.errors)&&i.forEach((function(e){return r(C(e.msg,"danger"))})),r({type:"REGISTER_FAIL"});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.register,l=e.isAuthenticated,c=Object(n.useState)({name:"",email:"",password:"",password2:""}),m=Object(P.a)(c,2),s=m[0],u=m[1],d=s.name,p=s.email,E=s.password,f=s.password2,h=function(e){return u(Object(v.a)(Object(v.a)({},s),{},Object(B.a)({},e.target.name,e.target.value)))},b=function(){var e=Object(S.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),E!==f?t("Passwords do not match","danger",3e3):a({name:d,email:p,password:E});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l?r.a.createElement(i.a,{to:"/main"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement(U.a,{onSubmit:function(e){return b(e)}},r.a.createElement(U.a.Group,{controlId:"formBasicName"},r.a.createElement(U.a.Label,null,"Name"),r.a.createElement(U.a.Control,{type:"text",name:"name",value:d,onChange:function(e){return h(e)},placeholder:"Enter Name"})),r.a.createElement(U.a.Group,{controlId:"formBasicEmail"},r.a.createElement(U.a.Label,null,"Email address"),r.a.createElement(U.a.Control,{type:"email",name:"email",value:p,onChange:function(e){return h(e)},placeholder:"Enter email"}),r.a.createElement(U.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(U.a.Group,{controlId:"formBasicPassword"},r.a.createElement(U.a.Label,null,"Password"),r.a.createElement(U.a.Control,{type:"password",name:"password",value:E,onChange:function(e){return h(e)},placeholder:"Password"})),r.a.createElement(U.a.Group,{controlId:"formBasicPassword2"},r.a.createElement(U.a.Label,null,"Re-enter Password"),r.a.createElement(U.a.Control,{type:"password",name:"password2",value:f,onChange:function(e){return h(e)},placeholder:"Password"})),r.a.createElement(D.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement("p",null,"Already have an account?",r.a.createElement(o.b,{to:"/login"}," Login Here"))))})),H=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(S.a)(k.a.mark((function a(n){var r,l,c,o;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,T.a.post("/api/auth",l,r);case 5:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(A),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),(o=a.t0.response.data.errors)&&o.forEach((function(e){return n(C(e.msg,"danger"))})),n({type:"LOGIN_FAIL"});case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,l=Object(n.useState)({email:"",password:""}),c=Object(P.a)(l,2),m=c[0],s=c[1],u=m.email,d=m.password,p=function(e){return s(Object(v.a)(Object(v.a)({},m),{},Object(B.a)({},e.target.name,e.target.value)))},E=function(){var e=Object(S.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(u,d);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(i.a,{to:"/main"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Login"),r.a.createElement(U.a,{onSubmit:function(e){return E(e)}},r.a.createElement(U.a.Group,{controlId:"formBasicEmail"},r.a.createElement(U.a.Label,null,"Email address"),r.a.createElement(U.a.Control,{type:"email",name:"email",value:u,onChange:function(e){return p(e)},placeholder:"Enter email"})),r.a.createElement(U.a.Group,{controlId:"formBasicPassword"},r.a.createElement(U.a.Label,null,"Password"),r.a.createElement(U.a.Control,{type:"password",name:"password",value:d,onChange:function(e){return p(e)},placeholder:"Password"})),r.a.createElement(D.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement("p",null,"Don't have an account?",r.a.createElement(o.b,{to:"/register"}," Register Here"))))})),z=a(76),J=Object(m.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement(z.a,{key:e.id,variant:e.alertType},e.msg)}))})),V=a(112),W=a(113),q=a(31),Y=function(e){return r.a.createElement(q.a,null,r.a.createElement(q.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:e.image1,alt:"First slide"}),r.a.createElement(q.a.Caption,null,r.a.createElement(o.b,{style:{color:"white"},to:"/movies/".concat(e.movieId1)},r.a.createElement("h3",null,e.title1),r.a.createElement("p",null,e.text1)))),r.a.createElement(q.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:e.image2,alt:"Second slide"}),r.a.createElement(q.a.Caption,null,r.a.createElement(o.b,{style:{color:"white"},to:"/movies/".concat(e.movieId2)},r.a.createElement("h3",null,e.title2),r.a.createElement("p",null,e.text2)))),r.a.createElement(q.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:e.image3,alt:"Third slide"}),r.a.createElement(q.a.Caption,null,r.a.createElement(o.b,{style:{color:"white"},to:"/movies/".concat(e.movieId3)},r.a.createElement("h3",null,e.title3),r.a.createElement("p",null,e.text3)))))},K=a(14),Q=a(70),X=function(e){return r.a.createElement(Q.a,null,r.a.createElement(K.a,{style:{width:"18rem",flex:1,margin:"5%"}},r.a.createElement(K.a.Img,{variant:"top",src:e.image}),r.a.createElement(K.a.Body,null,r.a.createElement(K.a.Title,null,e.title),r.a.createElement(K.a.Text,null,e.release),r.a.createElement(o.b,{to:"/movies/".concat(e.movieId)},r.a.createElement(D.a,{variant:"primary"},"See Movie")))))},Z=function(){var e=Object(n.useState)([]),t=Object(P.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(0),o=Object(P.a)(c,2),i=o[0],m=o[1];Object(n.useEffect)((function(){var e="/api/movies/popular?data=".concat(1);s(e)}),[]);var s=function(e){fetch(e).then((function(e){return e.json().then((function(e){l([].concat(Object(p.a)(a),Object(p.a)(e.results))),m(e.page)}))}))};return r.a.createElement("div",null,a[0]&&r.a.createElement(Y,{title1:a[0].title,text1:a[0].overview,movieId1:a[0].id,image1:"https://image.tmdb.org/t/p/w1280/".concat(a[0].backdrop_path&&a[0].backdrop_path),title2:a[1].title,text2:a[1].overview,movieId2:a[1].id,image2:"https://image.tmdb.org/t/p/w1280/".concat(a[1].backdrop_path&&a[1].backdrop_path),title3:a[2].title,text3:a[2].overview,movieId3:a[2].id,image3:"https://image.tmdb.org/t/p/w1280/".concat(a[2].backdrop_path&&a[2].backdrop_path)}),r.a.createElement("h1",{className:"popularHeading",style:{textAlign:"center"}},"Popular Movies"),r.a.createElement("div",{className:"mainBody"},r.a.createElement(V.a,{fluid:!0},r.a.createElement(W.a,null,a&&a.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement(X,{title:e.title,image:e.poster_path&&"https://image.tmdb.org/t/p/w500".concat(e.poster_path),release:e.release_date,movieId:e.id}))}))))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(D.a,{className:"loadMore",variant:"dark",onClick:function(){console.log(i);var e="/api/movies/popular?data=".concat(i+1);s(e)}},"Load More")))},$=a(72),ee=function(e){return r.a.createElement("div",null,r.a.createElement($.a,{src:"https://image.tmdb.org/t/p/w1280/".concat(e.image),style:{width:"100%",position:"relative"},fluid:!0}),r.a.createElement("h1",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",textAlign:"center",backgroundColor:"rgba(0,0,0,0.5)"}},e.title),r.a.createElement("h2",{style:{position:"absolute",top:"70%",left:"50%",transform:"translate(-50%, -50%)",color:"white",backgroundColor:"rgba(0,0,0,0.5)"}},e.tagline))},te=function(e){return r.a.createElement(Q.a,null,r.a.createElement(K.a,{style:{width:"18rem",flex:1}},r.a.createElement(K.a.Img,{variant:"top",src:e.image}),r.a.createElement(K.a.Body,null,r.a.createElement(K.a.Title,null,e.name),r.a.createElement(K.a.Text,null,e.character))))},ae=a(24),ne=function(e){return r.a.createElement(K.a,{style:{width:"100%"}},r.a.createElement(K.a.Header,null,e.description),r.a.createElement(ae.a,{horizontal:!0},r.a.createElement(ae.a.Item,{style:{width:"20rem"}},"Release Date"),r.a.createElement(ae.a.Item,{style:{width:"100%"}},e.release)),r.a.createElement(ae.a,{horizontal:!0},r.a.createElement(ae.a.Item,{style:{width:"20rem"}},"Runtime"),r.a.createElement(ae.a.Item,{style:{width:"100%"}},e.runtime," minutes")),r.a.createElement(ae.a,{horizontal:!0},r.a.createElement(ae.a.Item,{style:{width:"20rem"}},"Score"),r.a.createElement(ae.a.Item,{style:{width:"100%"}},e.score," / 10 (",e.votes," Votes)")))},re=function(e){var t=Object(n.useState)(0),a=Object(P.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(P.a)(o,2),m=i[0],s=i[1],u={movieId:e.movieId,movieTitle:e.movieTitle,movieRunTime:e.movieRunTime};Object(n.useEffect)((function(){T.a.post("/api/favorite/number",u).then((function(e){e.data.success?c(e.data.favoriteNumber):alert("Failed to get favorite number")})),T.a.post("/api/favorite/favorited",u).then((function(e){e.data.success?(console.log(e.data.favorited),s(e.data.favorited)):alert("Failed to get favorite info")}))}),[]);return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(D.a,{className:"favButton",onClick:function(){m?T.a.post("/api/favorite/remove",u).then((function(e){e.data.success?(c(l-1),s(!m)):alert("Failed to remove")})):T.a.post("/api/favorite/add",u).then((function(e){e.data.success?(c(l+1),s(!m)):alert("Failed to add")}))},variant:m?"success":"danger"},m?"Added to Favorites ":"Add to Favorites ",l))},le=function(e){var t=Object(n.useState)({}),a=Object(P.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),i=Object(P.a)(o,2),m=i[0],s=i[1];return Object(n.useEffect)((function(){var t=e.match.params.movieId;fetch("/api/movies/id?data=".concat(t)).then((function(e){e.json().then((function(e){console.log(e),c(e),fetch("/api/movies/credits?data=".concat(t)).then((function(e){e.json().then((function(e){console.log(e),s(e.cast)}))}))}))}))}),[]),r.a.createElement(n.Fragment,null,l&&r.a.createElement(ee,{image:l.backdrop_path,title:l.title,tagline:l.tagline}),r.a.createElement("div",{style:{margin:"0 10%"}},l&&r.a.createElement(ne,{description:l.overview,release:l.release_date,runtime:l.runtime,score:l.vote_average,votes:l.vote_count}),r.a.createElement(re,{movieId:e.match.params.movieId,movieTitle:l.title,movieRunTime:l.runtime}),r.a.createElement("h1",null,"Cast"),r.a.createElement(V.a,{fluid:!0},r.a.createElement(W.a,null,m&&m.filter((function(e){return e.profile_path})).map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement(te,{image:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),name:e.name,character:e.character}))}))))))},ce=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to the Dashboard"))},oe=function(){var e=Object(n.useState)([]),t=Object(P.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){T.a.get("api/favorite/all").then((function(e){e.data.success?(console.log(e.data.favorites),l(e.data.favorites)):alert("Sign in to use this feature.")}))},i=a.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(o.b,{to:"/movies/".concat(e.movieId)},e.movieTitle)),r.a.createElement("td",null,e.movieRunTime," minutes"),r.a.createElement("td",null,r.a.createElement(D.a,{variant:"danger",style:{width:"100%"},onClick:function(){return function(e){var t={movieId:e};T.a.post("/api/favorite/remove",t).then((function(e){e.data.success?c():alert("Failed to remove from favorites")}))}(e.movieId)}},"Remove")))}));return r.a.createElement("div",{style:{width:"85%",height:"80vh",margin:"3rem auto"}},r.a.createElement("h1",null,"Your Favorite Movies"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Run Time"),r.a.createElement("th",null,"Remove from Favorites"))),r.a.createElement("tbody",null,i)))},ie=a(77),me=Object(m.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=a.isAuthenticated,l=a.loading,c=Object(ie.a)(e,["component","auth"]);return r.a.createElement(i.b,Object.assign({},c,{render:function(e){return n||l?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))}));a(108);localStorage.token&&R(localStorage.token);var se=function(){return Object(n.useEffect)((function(){g.dispatch(A())}),[]),r.a.createElement(m.a,{store:g},r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(L,null),r.a.createElement(i.b,{exact:!0,path:"/",component:G}),r.a.createElement(J,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/register",component:M}),r.a.createElement(i.b,{exact:!0,path:"/login",component:H}),r.a.createElement(me,{exact:!0,path:"/main",component:Z}),r.a.createElement(me,{exact:!0,path:"/dashboard",component:ce}),r.a.createElement(me,{exact:!0,path:"/movies/:movieId",component:le}),r.a.createElement(me,{exact:!0,path:"/favorites",component:oe})),r.a.createElement(F,null))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root"))},79:function(e,t,a){e.exports=a(109)}},[[79,1,2]]]);
//# sourceMappingURL=main.29a962b5.chunk.js.map